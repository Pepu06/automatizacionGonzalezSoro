{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/pedro/Documents/gonzalezSoro_automatizacion/app/dashboard/page.jsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\n\nconst MESES = [\n    \"Enero\",\n    \"Febrero\",\n    \"Marzo\",\n    \"Abril\",\n    \"Mayo\",\n    \"Junio\",\n    \"Julio\",\n    \"Agosto\",\n    \"Septiembre\",\n    \"Octubre\",\n    \"Noviembre\",\n    \"Diciembre\",\n];\n\nconst IMPUESTOS = [\n    \"ABL\",\n    \"ABLUC\",\n    \"ARBA\",\n    \"AYSA\",\n    \"AYSAUC\",\n    \"EDESUR\",\n    \"EXPENSAS\",\n    \"METROGAS\",\n    \"MUNICIPAL\",\n    \"TELECOM\",\n];\n\nfunction esMesFuturo(mes) {\n    const ahora = new Date();\n    const mesActual = ahora.getMonth();\n    const indiceMes = MESES.indexOf(mes);\n    return indiceMes > mesActual;\n}\n\nexport default function Dashboard() {\n    const [resumen, setResumen] = useState(null);\n    const [mesSeleccionado, setMesSeleccionado] = useState(MESES[new Date().getMonth()]);\n    const [loading, setLoading] = useState(true);\n\n    useEffect(() => {\n        const cargarDatos = async () => {\n            try {\n                setLoading(true);\n                const res = await fetch(`/api/resumen?mes=${mesSeleccionado}`);\n                if (!res.ok) throw new Error(\"Error al cargar datos\");\n                const data = await res.json();\n                setResumen(data);\n            } catch (err) {\n                console.error(err);\n                alert(\"Error al cargar los datos del resumen\");\n            } finally {\n                setLoading(false);\n            }\n        };\n\n        cargarDatos();\n    }, [mesSeleccionado]);\n\n    const getDepartamentoEstado = (departamento, impuesto) => {\n        if (!resumen || !resumen.data || !resumen.data[departamento]) {\n            return { pagado: false, monto: 0 };\n        }\n        return resumen.data[departamento][impuesto] || { pagado: false, monto: 0 };\n    };\n\n    const getColorEstado = (impuesto, departamento) => {\n        const estado = getDepartamentoEstado(departamento, impuesto);\n        const mesFuturo = esMesFuturo(mesSeleccionado);\n\n        if (mesFuturo) {\n            return \"bg-gray-100 text-gray-600\";\n        }\n\n        if (estado.pagado) {\n            return \"bg-green-400 text-white\";\n        } else {\n            return \"bg-red-400 text-red-900\";\n        }\n    };\n\n    return (\n        <div className=\"min-h-screen bg-gray-100 py-8 px-4\">\n            <div className=\"max-w-7xl mx-auto\">\n                {/* Botón de volver */}\n                <div className=\"mb-6\">\n                    <Link\n                        href=\"/\"\n                        className=\"fixed top-2 left-4 items-center gap-2 bg-gray-800 text-white px-8 py-4 rounded-lg hover:bg-gray-700 transition-colors font-medium\"\n                    >\n                        ← Volver\n                    </Link>\n                </div>\n\n                {/* Encabezado */}\n                <div className=\"bg-white rounded-lg shadow p-6 mb-6 mt-20\">\n                    <h1 className=\"text-3xl font-bold text-gray-900 mb-4 flex items-center justify-center\">\n                        Resumen anual de Impuestos\n                    </h1>\n\n                    {/* Selector de meses */}\n                    <div className=\"flex gap-2 flex-wrap justify-center items-center\">\n                        {MESES.map((mes) => (\n                            <button\n                                key={mes}\n                                onClick={() => setMesSeleccionado(mes)}\n                                className={`px-4 py-2 rounded-lg font-medium transition-colors ${mesSeleccionado === mes\n                                    ? \"bg-blue-600 text-white\"\n                                    : \"bg-gray-200 text-gray-800 hover:bg-gray-300\"\n                                    }`}\n                            >\n                                {mes}\n                            </button>\n                        ))}\n                    </div>\n                </div>\n\n                {/* Contenido */}\n                {loading ? (\n                    <div className=\"bg-white rounded-lg shadow p-8 text-center\">\n                        <p className=\"text-gray-600\">Cargando datos...</p>\n                    </div>\n                ) : resumen && Object.keys(resumen.data || {}).length > 0 ? (\n                    <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n                        <div className=\"overflow-x-auto\">\n                            <table className=\"w-full border-collapse\">\n                                <thead className=\"bg-gray-900 text-white sticky top-0\">\n                                    <tr>\n                                        <th className=\"px-6 py-4 text-left font-semibold\">\n                                            Departamento\n                                        </th>\n                                        {IMPUESTOS.map((impuesto) => (\n                                            <th\n                                                key={impuesto}\n                                                className={`px-4 py-4 text-center font-semibold text-sm`}\n                                            >\n                                                <div>{impuesto}</div>\n                                            </th>\n                                        ))}\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {Object.keys(resumen.data)\n                                        .sort()\n                                        .map((departamento, idx) => (\n                                            <tr\n                                                key={departamento}\n                                                className={`border-t ${idx % 2 === 0 ? \"bg-white\" : \"bg-gray-50\"\n                                                    } hover:bg-blue-50 transition-colors`}\n                                            >\n                                                <td className=\"px-6 py-4 font-medium text-gray-900\">\n                                                    {departamento}\n                                                </td>\n                                                {IMPUESTOS.map((impuesto) => {\n                                                    const estado = getDepartamentoEstado(\n                                                        departamento,\n                                                        impuesto\n                                                    );\n                                                    const mesFuturo = esMesFuturo(mesSeleccionado);\n\n                                                    return (\n                                                        <td\n                                                            key={impuesto}\n                                                            className={`px-4 py-4 text-center text-sm font-medium border-r ${getColorEstado(\n                                                                impuesto,\n                                                                departamento\n                                                            )}`}\n                                                        >\n                                                            {mesFuturo ? (\n                                                                <span className=\"text-gray-500\">-</span>\n                                                            ) : estado.pagado ? (\n                                                                <div>\n                                                                    <div>✓</div>\n                                                                    <div className=\"text-sm mt-1\">\n                                                                        ${estado.monto.toFixed(2)}\n                                                                    </div>\n                                                                </div>\n                                                            ) : (\n                                                                <span className=\"font-bold\">✗</span>\n                                                            )}\n                                                        </td>\n                                                    );\n                                                })}\n                                            </tr>\n                                        ))}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                ) : (\n                    <div className=\"bg-white rounded-lg shadow p-8 text-center\">\n                        <p className=\"text-gray-600\">No hay datos disponibles para este mes.</p>\n                    </div>\n                )}\n\n                <div className=\"mt-6 bg-white rounded-lg shadow p-6\">\n                    <h3 className=\"font-bold text-gray-900 mb-4\">Leyenda:</h3>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-8 h-8 bg-green-400 rounded\"></div>\n                            <span className=\"text-gray-700\">\n                                <strong>Verde:</strong> Pagado\n                            </span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-8 h-8 bg-red-400 rounded\"></div>\n                            <span className=\"text-gray-700\">\n                                <strong>Rojo:</strong> No pagado (mes pasado)\n                            </span>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                            <div className=\"w-8 h-8 bg-gray-100 rounded\"></div>\n                            <span className=\"text-gray-700\">\n                                <strong>Gris:</strong> Mes futuro\n                            </span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}